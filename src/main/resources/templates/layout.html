<!DOCTYPE html>
<html
        lang="en"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
<head>
    <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">
        [[#{app.title}]]
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}" />
    <link th:href="${asset.get('main.css')}" rel="stylesheet" />
    <script defer th:src="@{/webjars/alpinejs/dist/cdn.min.js}"></script>
</head>
<body hx-boost="true" x-data="{ sidebarOpen: true }" class="bg-granite-50">
<div class="flex h-screen overflow-hidden">
    <!-- Sidebar -->
    <aside
            x-show="sidebarOpen"
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="-translate-x-full"
            x-transition:enter-end="translate-x-0"
            x-transition:leave="transition ease-in duration-150"
            x-transition:leave-start="translate-x-0"
            x-transition:leave-end="-translate-x-full"
            class="bg-granite-700 w-64 flex-shrink-0 overflow-y-auto"
    >
        <!-- Logo -->
        <div class="border-b border-granite-600 p-4">
            <img th:src="@{/images/logo-blanc.png}" alt="Logo" class="h-8 mx-auto" />
        </div>

        <!-- Navigation -->
        <nav class="p-2">
            <ul class="space-y-1">
                <li>
                    <a
                            th:href="@{/dashboard}"
                            class="flex items-center gap-3 px-3 py-2.5 text-granite-100 rounded-lg hover:bg-granite-600 transition-colors font-medium"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 flex-shrink-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" />
                        </svg>
                        <span class="text-sm">Tableau de bord</span>
                    </a>
                </li>
                <li>
                    <a
                            th:href="@{/tasks}"
                            class="flex items-center gap-3 px-3 py-2.5 text-granite-100 rounded-lg hover:bg-granite-600 transition-colors font-medium"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 flex-shrink-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122" />
                        </svg>
                        <span class="text-sm">TÃ¢ches</span>
                    </a>
                </li>
                <li>
                    <a
                            th:href="@{/file-explorer}"
                            class="flex items-center gap-3 px-3 py-2.5 text-granite-100 rounded-lg hover:bg-granite-600 transition-colors font-medium"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 flex-shrink-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z" />
                        </svg>
                        <span class="text-sm">Explorateur de fichiers</span>
                    </a>
                </li>
                <li>
                    <a
                            th:href="@{/internal-communication}"
                            class="flex items-center gap-3 px-3 py-2.5 text-granite-100 rounded-lg hover:bg-granite-600 transition-colors font-medium"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 flex-shrink-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
                        </svg>
                        <span class="text-sm">Communication interne</span>
                    </a>
                </li>
            </ul>

            <!-- Separator -->
            <div class="border-t border-granite-600 my-3"></div>

            <ul class="space-y-1">
                <li>
                    <a
                            th:href="@{/users}"
                            class="flex items-center gap-3 px-3 py-2.5 text-granite-100 rounded-lg hover:bg-granite-600 transition-colors font-medium"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 flex-shrink-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
                        </svg>
                        <span class="text-sm">Utilisateurs</span>
                    </a>
                </li>
                <li>
                    <a
                            th:href="@{/projects}"
                            class="flex items-center gap-3 px-3 py-2.5 text-granite-100 rounded-lg hover:bg-granite-600 transition-colors font-medium"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 flex-shrink-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z" />
                        </svg>
                        <span class="text-sm">Projets</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main content -->
    <div class="flex-1 flex flex-col min-w-0">
        <!-- Header -->
        <header class="bg-white border-b border-granite-200 flex-shrink-0">
            <div class="flex items-center justify-between px-4 h-16">
                <!-- Left: Toggle + Title -->
                <div class="flex items-center gap-3">
                    <button
                            @click="sidebarOpen = !sidebarOpen"
                            class="p-2 rounded-lg hover:bg-granite-100 transition-colors"
                    >
                        <svg class="size-5 text-granite-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    <h1 class="text-lg font-semibold text-granite-900">E-helper</h1>
                </div>

                <!-- Right: Notifications + Profile -->
                <div class="flex items-center gap-2">
                    <!-- Notifications -->
                    <button class="relative p-2 rounded-lg hover:bg-granite-100 transition-colors">
                        <svg class="size-5 text-granite-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                        </svg>
                        <span class="absolute top-1.5 right-1.5 size-2 bg-granite-600 rounded-full"></span>
                    </button>

                    <!-- Profile -->
                    <button class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-granite-100 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 text-granite-600">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                        </svg>
                        <span class="hidden sm:block text-sm text-granite-700 font-medium">Alpha mar</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main content area -->
        <main class="flex-1 overflow-y-auto" x-data="mainOfApp">
            <div class="max-w-7xl mx-auto p-6 h-full">
                <!-- Breadcrumb -->
                <nav class="mb-4" aria-label="Breadcrumb">
                    <ol class="flex items-center gap-2 text-sm text-granite-600">
                        <li>
                            <a th:href="@{/dashboard}" class="hover:text-granite-900 transition-colors">Accueil</a>
                        </li>
                        <li class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                            </svg>
                            <span class="text-granite-900 font-medium" layout:fragment="breadcrumb-current">Page actuelle</span>
                        </li>
                    </ol>
                </nav>
                <!-- Messages -->
                <div class="space-y-3 mb-6">
                    <p th:if="${MSG_SUCCESS}" class="p-4 bg-green-50 text-green-700 rounded-lg border border-green-200" role="alert">
                        [[${MSG_SUCCESS}]]
                    </p>
                    <p th:if="${MSG_INFO}" class="p-4 bg-blue-50 text-blue-700 rounded-lg border border-blue-200" role="alert">
                        [[${MSG_INFO}]]
                    </p>
                    <p th:if="${MSG_ERROR}" class="p-4 bg-red-50 text-red-700 rounded-lg border border-red-200" role="alert">
                        [[${MSG_ERROR}]]
                    </p>
                </div>

                <!-- Page content -->
                <div layout:fragment="content" class="bg-white rounded-lg border border-granite-200 p-6 h-full"></div>
            </div>
        </main>
    </div>
</div>

<script th:src="${asset.get('main.js')}"></script>
<th:block layout:fragment="scripts"></th:block>
</body>
</html>